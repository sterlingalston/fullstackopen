(this.webpackJsonpreactproject1=this.webpackJsonpreactproject1||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),l=t.n(a),r=t(14),c=t.n(r),u=t(4),o=t(3),m=function(e){var n=e.thePeople,t=e.delHandle;return l.a.createElement("div",null,l.a.createElement("ul",null,n.map((function(e){return l.a.createElement("li",{name:e.name,key:e.name}," ",e.name," ",e.phone," ",l.a.createElement("button",{onClick:t},"delete"))}))))},i=function(e){var n=e.message,t=e.theclass;return null===n?null:l.a.createElement("div",{className:t},n)},s=t(2),d=t.n(s),f="/api/persons",h=function(){return d.a.get(f).then((function(e){return e.data}))},p=function(e){return d.a.post(f,e).then((function(e){return e.data}))},E=function(e,n){return d.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},b=function(e,n){return d.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var n=e.theFilter,t=e.theHandler;return l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("td",null,"filter shown with"),l.a.createElement("td",null,l.a.createElement("input",{value:n,onChange:t}))))},g=function(e){var n=e.submitHandler,t=e.nameValue,a=e.phoneValue,r=e.nameHandle,c=e.phoneHandle;return l.a.createElement("form",{onSubmit:n},l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("tr",null,l.a.createElement("td",null,"name:")," ",l.a.createElement("td",null,l.a.createElement("input",{id:"theinput",value:t,onChange:r}))),l.a.createElement("tr",null,l.a.createElement("td",null,"number:"),l.a.createElement("td",null," ",l.a.createElement("input",{value:a,onChange:c}))))),l.a.createElement("div",null,l.a.createElement("button",{type:"submit"},"add")))},j=function(){var e=Object(a.useState)([{name:"Arto Hellas",phone:"040-1234567"}]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=function(){h().then((function(e){r(e)}))},s=Object(a.useState)({name:"",phone:""}),d=Object(o.a)(s,2),f=d[0],j=d[1],w=Object(a.useState)(""),H=Object(o.a)(w,2),O=H[0],k=H[1],C=Object(a.useState)({}),y=Object(o.a)(C,2),S=y[0],V=y[1];Object(a.useEffect)(c,[]);var A=O.length>0?t.filter((function(e){return e.name.substr(0,O.length).toUpperCase()==O.toUpperCase()})):t;return l.a.createElement("div",null,l.a.createElement("h2",null,"Phonebook"),l.a.createElement(i,{message:S.message,theclass:S.class}),l.a.createElement(v,{theFilter:O,theHandler:function(e){console.log("the filter: ",O),k(e.target.value)}}),l.a.createElement("h3",null,"add a new"),l.a.createElement(g,{submitHandler:function(e){if(e.preventDefault(),t.filter((function(e){return e.name==f.name})).length){if(window.confirm("".concat(f.name," is already added to phonebook, replace the old number with the new one?"))){var n=t.find((function(e){return e.name==f.name})).id,a=t.find((function(e){return e.id==n})),l=Object(u.a)(Object(u.a)({},a),{},{phone:f.phone});E(n,l).then((function(e){c(),j({name:"",phone:""}),V({message:"Information of '".concat(f.name,"' has been updated."),class:"success"}),setTimeout((function(){V({})}),5e3)}))}}else p(f).then((function(e){r(t.concat(e)),V({message:"Added ".concat(f.name),class:"success"}),setTimeout((function(){V({})}),5e3)}))},nameValue:f.name,nameHandle:function(e){console.log(e.target.value),j({name:e.target.value,phone:f.phone})},phoneValue:f.phone,phoneHandle:function(e){console.log(e.target.value),j({name:f.name,phone:e.target.value})}}),l.a.createElement("h3",null,"Numbers"),l.a.createElement("div",null,l.a.createElement(m,{thePeople:A,delHandle:function(e){var n=e.target.parentNode.getAttribute("name"),a=t.find((function(e){return e.name==n})).id;window.confirm("Delete "+n+"?")&&(console.log("deleted",n,a),b(a).then((function(e){c()})).catch((function(e){V({message:"Information of '".concat(n,"' was already removed from server"),class:"error"})})))}})))};t(37);c.a.render(l.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.12004400.chunk.js.map